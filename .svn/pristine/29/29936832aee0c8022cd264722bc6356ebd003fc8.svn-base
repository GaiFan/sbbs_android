package com.yuchao.ui;

import com.gfan.sbbs.MyApplication;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.text.TextUtils;
import android.util.Log;
import android.view.Window;
import android.widget.ImageView;

public class BaseActivity extends Activity {
	protected MyApplication application;
	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		_onCreate(savedInstanceState);
	}

	protected boolean _onCreate(Bundle bundle) {
		requestWindowFeature(Window.FEATURE_NO_TITLE);
		application = (MyApplication) getApplication();
		// 强制竖屏
//		setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
		if (!checkLogin()) {
			Log.i("LoginActivity", "Login Status is false");
			return false;
		} else {
			Log.i("LoginActivity", "Login Status is true");
			return true;
		}
	}

	private boolean checkLogin() {
		// 处理未登录的情况
		if (!isLogin()) {
			handleLogout();
			return false;
		} else {
			return true;
		}
	}

	private void handleLogout() {
		Intent intent = new Intent(this, LoginActivity.class);
		startActivity(intent);
	}

	private boolean isLogin() {
		//用户名非空，视为已登录
		return !TextUtils.isEmpty(application.getUserName());
	}
}
